name: query_thread_log
fullyQualifiedName: test_clickhouse.default.system.query_thread_log
description: |-
  Contains information about threads that execute queries, for example, thread name, thread start time, duration of query processing.

  It is safe to truncate or drop this table at any time.
tableType: Regular
columns:
  - name: hostname
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: Hostname of the server executing the query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.hostname
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: event_date
    dataType: DATE
    dataLength: 1
    dataTypeDisplay: date
    description: The date when the thread has finished execution of the query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.event_date
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: event_time
    dataType: DATETIME
    dataLength: 1
    dataTypeDisplay: datetime
    description: The date and time when the thread has finished execution of the query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.event_time
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: event_time_microseconds
    dataType: DATETIME
    dataLength: 1
    dataTypeDisplay: datetime64<6>
    description: The date and time when the thread has finished execution of the query
      with microseconds precision.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.event_time_microseconds
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: query_start_time
    dataType: DATETIME
    dataLength: 1
    dataTypeDisplay: datetime
    description: Start time of query execution.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.query_start_time
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: query_start_time_microseconds
    dataType: DATETIME
    dataLength: 1
    dataTypeDisplay: datetime64<6>
    description: Start time of query execution with microsecond precision.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.query_start_time_microseconds
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: query_duration_ms
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: Duration of query execution.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.query_duration_ms
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: read_rows
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: Number of read rows.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.read_rows
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: read_bytes
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: Number of read bytes.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.read_bytes
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: written_rows
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: "For INSERT queries, the number of written rows. For other queries,\
      \ the column value is 0."
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.written_rows
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: written_bytes
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: "For INSERT queries, the number of written bytes. For other queries,\
      \ the column value is 0."
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.written_bytes
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: memory_usage
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: int64
    description: The difference between the amount of allocated and freed memory in
      context of this thread.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.memory_usage
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: peak_memory_usage
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: int64
    description: The maximum difference between the amount of allocated and freed
      memory in context of this thread.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.peak_memory_usage
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: thread_name
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: Name of the thread.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.thread_name
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: thread_id
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: Internal thread ID.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.thread_id
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: master_thread_id
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: OS initial ID of initial thread.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.master_thread_id
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: current_database
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: Name of the current database.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.current_database
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: query
    dataType: STRING
    dataLength: 1
    dataTypeDisplay: string
    description: Query string.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.query
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: normalized_query_hash
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: "The hash of normalized query - with wiped constanstans, etc."
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.normalized_query_hash
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: is_initial_query
    dataType: SMALLINT
    dataLength: 1
    dataTypeDisplay: uint8
    description: "Query type. Possible values: 1 — Query was initiated by the client,\
      \ 0 — Query was initiated by another query for distributed query execution."
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.is_initial_query
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: user
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: Name of the user who initiated the current query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.user
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: query_id
    dataType: STRING
    dataLength: 1
    dataTypeDisplay: string
    description: ID of the query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.query_id
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: address
    dataType: IPV6
    dataLength: 1
    dataTypeDisplay: ipv6
    description: IP address that was used to make the query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.address
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: port
    dataType: SMALLINT
    dataLength: 1
    dataTypeDisplay: uint16
    description: The client port that was used to make the query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.port
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: initial_user
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: Name of the user who ran the initial query (for distributed query
      execution).
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.initial_user
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: initial_query_id
    dataType: STRING
    dataLength: 1
    dataTypeDisplay: string
    description: ID of the initial query (for distributed query execution).
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.initial_query_id
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: initial_address
    dataType: IPV6
    dataLength: 1
    dataTypeDisplay: ipv6
    description: IP address that the parent query was launched from.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.initial_address
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: initial_port
    dataType: SMALLINT
    dataLength: 1
    dataTypeDisplay: uint16
    description: The client port that was used to make the parent query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.initial_port
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: initial_query_start_time
    dataType: DATETIME
    dataLength: 1
    dataTypeDisplay: datetime
    description: Start time of the initial query execution.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.initial_query_start_time
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: initial_query_start_time_microseconds
    dataType: DATETIME
    dataLength: 1
    dataTypeDisplay: datetime64<6>
    description: 'Start time of the initial query execution '
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.initial_query_start_time_microseconds
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: interface
    dataType: SMALLINT
    dataLength: 1
    dataTypeDisplay: uint8
    description: "Interface that the query was initiated from. Possible values: 1\
      \ — TCP, 2 — HTTP."
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.interface
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: is_secure
    dataType: SMALLINT
    dataLength: 1
    dataTypeDisplay: uint8
    description: The flag which shows whether the connection was secure.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.is_secure
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: os_user
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: OSs username who runs clickhouse-client.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.os_user
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: client_hostname
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: Hostname of the client machine where the clickhouse-client or another
      TCP client is run.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.client_hostname
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: client_name
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: The clickhouse-client or another TCP client name.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.client_name
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: client_revision
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: Revision of the clickhouse-client or another TCP client.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.client_revision
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: client_version_major
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: Major version of the clickhouse-client or another TCP client.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.client_version_major
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: client_version_minor
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: Minor version of the clickhouse-client or another TCP client.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.client_version_minor
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: client_version_patch
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: Patch component of the clickhouse-client or another TCP client version.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.client_version_patch
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: script_query_number
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: A sequential query number in a multi-query script.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.script_query_number
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: script_line_number
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: A line number in a multi-query script where the current query starts.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.script_line_number
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: http_method
    dataType: SMALLINT
    dataLength: 1
    dataTypeDisplay: uint8
    description: "HTTP method that initiated the query. Possible values: 0 — The query\
      \ was launched from the TCP interface, 1 — GET method was used., 2 — POST method\
      \ was used."
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.http_method
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: http_user_agent
    dataType: LOWCARDINALITY
    dataLength: 1
    dataTypeDisplay: lowcardinality<string>
    description: The UserAgent header passed in the HTTP request.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.http_user_agent
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: http_referer
    dataType: STRING
    dataLength: 1
    dataTypeDisplay: string
    description: HTTP header `Referer` passed in the HTTP query (contains an absolute
      or partial address of the page making the query).
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.http_referer
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: forwarded_for
    dataType: STRING
    dataLength: 1
    dataTypeDisplay: string
    description: HTTP header `X-Forwarded-For` passed in the HTTP query.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.forwarded_for
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: quota_key
    dataType: STRING
    dataLength: 1
    dataTypeDisplay: string
    description: The 'quota key' specified in the quotas setting.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.quota_key
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: distributed_depth
    dataType: BIGINT
    dataLength: 1
    dataTypeDisplay: uint64
    description: How many times a query was forwarded between servers.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.distributed_depth
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: revision
    dataType: INT
    dataLength: 1
    dataTypeDisplay: uint32
    description: ClickHouse revision.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.revision
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: ProfileEvents
    dataType: MAP
    dataLength: 1
    dataTypeDisplay: "map<lowcardinality<string>, uint64>"
    description: ProfileEvents that measure different metrics for this thread. The
      description of them could be found in the table system.events.
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log.ProfileEvents
    tags: []
    constraint: NOT_NULL
    children: []
    customMetrics: []
  - name: ProfileEvents.Names
    dataType: ARRAY
    arrayDataType: LOWCARDINALITY
    dataTypeDisplay: array<lowcardinality<string>>
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log."ProfileEvents.Names"
    tags: []
    children: []
    customMetrics: []
  - name: ProfileEvents.Values
    dataType: ARRAY
    arrayDataType: BIGINT
    dataTypeDisplay: array<uint64>
    fullyQualifiedName: test_clickhouse.default.system.query_thread_log."ProfileEvents.Values"
    tags: []
    children: []
    customMetrics: []
tableConstraints: []
owners: []
databaseSchema:
  id: 8a7299bd-4233-40a1-9e70-dc760e5e6b42
  type: databaseSchema
  name: system
  fullyQualifiedName: test_clickhouse.default.system
  displayName: system
  deleted: false
database:
  id: 892667da-43ed-425c-94ad-24a4cc252df4
  type: database
  name: default
  fullyQualifiedName: test_clickhouse.default
  displayName: default
  deleted: false
service:
  id: b468f00e-0925-45e5-a89d-c038e1a5e79f
  type: databaseService
  name: test_clickhouse
  fullyQualifiedName: test_clickhouse
  description: ""
  displayName: test_clickhouse
  deleted: false
serviceType: Clickhouse
tags: []
joins:
  startDate: 2026-01-07
  dayCount: 30
  columnJoins: []
  directTableJoins: []
customMetrics: []
incrementalChangeDescription:
  fieldsAdded:
    - name: lifeCycle
      newValue: "{\"accessed\":{\"timestamp\":1768521600000,\"accessedByAProcess\"\
        :\"observability-internal\"}}"
  fieldsUpdated: []
  fieldsDeleted: []
  previousVersion: 0.1
  changeSummary: {}
domains: []
dataProducts: []
lifeCycle:
  accessed:
    timestamp: 1768521600000
    accessedByAProcess: observability-internal
sourceHash: b43f576d5d7c6596ebce069912da069e
processedLineage: false
entityStatus: Unprocessed
